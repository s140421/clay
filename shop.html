<!DOCTYPE html>
<html>
<head>
    <title>Shop</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
    
    <style>
        .btn-primary {
            display: block;
            margin: 0 auto; 
        }
        #cart-items {
            list-style-type: none; 
            padding: 0; 
        }
    </style>
     
    <script>

        // Define object types for products
        function Product(name, price, image) {
            this.name = name;
            this.price = price;
            this.image = image;
            this.createButton = function() {
                const addButton = document.createElement('button');
                addButton.textContent = 'Add to Cart';
                addButton.className = 'btn-primary';
                addButton.style.backgroundColor = '#91988a';
                addButton.style.color = 'white';
                addButton.style.alignItems = 'center';
                addButton.onclick = () => addItem(this.name);
                return addButton;
            }
        }

        // Constructor method for creating products
        function createProduct(name, price, image) {
            return new Product(name, price, image);
        }

        // Create product instances with images
        const products = [
            createProduct('Salad Bowls', 5.500, 'bowl.jpg'),
            createProduct('Latte Cups', 8.000, 'latte.jpg'),
            createProduct('Flower Vase', 8.500, 'flower.jpg'),
            createProduct('Serving Plates', 5.000, 'plates.jpg'),
            createProduct('Gray Jars', 10.000, 'jars.jpg'),
            createProduct('V60 Cups', 5.000, 'V60.jpg'),
            createProduct('Decoration Vases', 25.000, 'vases.jpg'),
            createProduct('Vases', 15.000, 'vases2.jpg'),
            createProduct('Matcha Cups', 7.000, 'matcha.jpg'),
            createProduct('Dinning Table Set', 20.000, 'set.jpg')
        ];

        // Function to dynamically populate the product table
        function populateProductTable() {
            const tableBody = document.querySelector('#product-table tbody');
            tableBody.innerHTML = '';

            // Loop through products to populate table rows
            products.forEach(product => {
                const row = tableBody.insertRow();
                
                // Insert image cell
                const imgCell = row.insertCell();
                const img = document.createElement('img');
                img.src = product.image;
                img.alt = product.name;
                img.height = 150; // Set height of image
                img.width = 250; // Set width of image
                imgCell.appendChild(img);
                
                // Insert name cell
                const nameCell = row.insertCell();
                nameCell.textContent = product.name;

                // Insert price cell
                const priceCell = row.insertCell();
                priceCell.textContent = `${product.price} OMR`;

                // Insert button cell
                const buttonCell = row.insertCell();
                const addButton = product.createButton();
                buttonCell.appendChild(addButton);
                
                // Quantity input field for product
                const quantityInput = document.createElement('input');
                quantityInput.type = 'hidden';
                quantityInput.id = product.name.toLowerCase().replace(' ', '-');
                quantityInput.className = 'item-quantity';
                quantityInput.value = '0';
                buttonCell.appendChild(quantityInput);
            });

        }

        function search() {
             // Get the search query from the input field
            const query = document.getElementById('search-input').value.toLowerCase();

            // Perform the search operation on the array (e.g., products or workshops)
            const searchResults = products.filter(products => products.name.toLowerCase().includes(query));

            // Display search results or perform other actions as needed
            displaySearchResults(searchResults);
        }

        function displaySearchResults(results) {
            const searchResultsContainer = document.getElementById('search-results');
            searchResultsContainer.innerHTML = '';

            results.forEach(result => {
            const resultItem = document.createElement('div');
            resultItem.textContent = result.name;
            searchResultsContainer.appendChild(resultItem);
            });
        }
        

        function addItem(itemName) {
            const itemPrice = products.find(product => product.name === itemName).price;
            const cartItem = `<li data-item="${itemName}" data-price="${itemPrice.toFixed(3)}">${itemName}: ${itemPrice.toFixed(3)} OMR</li>`;
            document.getElementById('cart-items').innerHTML += cartItem;
        }

        // Function to calculate total price
        function calculateTotal() {
            var total = 0;
            const cartItems = document.getElementById('cart-items').childNodes;

            cartItems.forEach(cartItem => {
                if (cartItem.nodeType === 1) { // Check if node is an element node
                    const itemName = cartItem.getAttribute('data-item');
                    const itemPrice = parseFloat(cartItem.getAttribute('data-price'));
                    total += itemPrice;
                }
            });

            document.getElementById('total').innerText = `Total Price: ${total.toFixed(3)} OMR`;
        }

        // Call populateProductTable function when the DOM content is loaded
        document.addEventListener('DOMContentLoaded', function() {
            populateProductTable();
        });

    </script>
</head>

<body>
    <div class="container-fluid">
        <nav class="navbar navbar-expand-lg navbar-light bg-light">
            <img src="logo2.jpg" alt="logo" class="navbar-logo">
            <ul class="navbar-nav ms-auto">
                <li class="nav-item">
                    <a class="nav-link"  href="index.html">Home</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link"  href="workshop.html">Workshop</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link active" href="shop.html">Shop</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link"  href="about.html">About</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="contact.html">Contact</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="funpage.html">Fun</a>
                </li>
                <li class="nav-item">
                        <a class="nav-link" href="Questionnaire.html">Questionnaire</a>
                </li>
            </ul>
        </nav>
    </div>
    
    <br>
    <div class="headerpage" style="background-image:url(shop_cover.jpg);">
       <h1 class="clay" style="font-size:180px;color:#ede7db;  text-align: center;">Shop</h1>
       <br>
       <p style="color:#ede7db; text-align: center;font-size: 20px">
        Discover our collection of unique handmade pottery
       </p>
    </div>
    <br/>
    <h1 style="color: #91988a; text-align: center; font-size: 80px;font-family: 'Caveat', sans-serif ; font-style: italic;">All Products</h1>
    <hr>
    <table id="product-table" align="center">
        <tbody></tbody>
    </table>
    
    <!-- Shopping cart -->
    <div style="text-align: center; background-color: #f2f2f2;">
        <br>
        <h2 style="font-family: 'Times New Roman', Times, serif;">Shopping Cart</h2>
        <ul style="font-family: 'Times New Roman', Times, serif;" id="cart-items"></ul>
        <button class="btn-primary" style="background-color: #91988a; color: white; align-items: center;" onclick="calculateTotal()">Calculate Total Price</button>
        <br>
        <div style="font-family: 'Times New Roman', Times, serif;" id="total"></div>
        <br>
        <div style="text-align: center;">
            <form onsubmit="search(); return false;">
                <input type="text" id="search-input" placeholder="Search...">
                <button type="submit" class="btn btn-outline-dark">Search</button>
            </form>
            <br>
        </div>
    </div>
    <br>
    <br>
</body>
<footer class="footer"></footer>
</html>
